<div>
  <%= attachment_image_tag @post, :image, size: "300x300", format: 'jpeg', fallback: "no_image.jpg" %>
  <p>
    <%= link_to user_path(@post.user) do %>
      <%= attachment_image_tag @post.user, :profile_image, size: "50x50", format: 'jpeg', fallback: "no_image.jpg" %>
      <%= @post.user.name %>
    <% end %>
  </p>
  <%= @post.created_at.strftime('%Y/%m/%d %H:%M:%S') %>
  <% if user_signed_in? %><!-- ユーザーがログインしている且つ自分の投稿じゃない時のみいいねボタンを表示 -->
    <% if @post.user == current_user %><!-- 自分の投稿にはいいね数のみ表示（いいねできない） -->
      <p class="fas fa-heart heart_red"><%= @post.favorites.count %></p>
    <% else %>
      <p class="favorite-btn_<%= @post.id %>"><%= render 'favorites/favorite-btn', post: @post %></p>
    <% end %>
  <% else %><!-- ユーザーがログインしていない時はいいね数のみ表示 -->
    <p class="fas fa-heart heart_red"><%= @post.favorites.count %></p>
  <% end %>
  <p>タイトル：<%= @post.title %></p>
  <p>本文：<%= @post.body %></p>
  <p>タグ：
    <% @post_tags.each do |tag| %>
      <%= link_to tag.tag_name, tag_posts_path(tag_id: tag.id) %> (<%= tag.posts.count %>)
    <% end %>
  </p>
  <% if @post.user == current_user %>
    <%= link_to "削除", post_path(@post), method: :delete %>
    <%= link_to "編集", edit_post_path(@post) %>
  <% end %>
</div>

<div class="post_comments">
<p id="comments-count">コメント件数：<%= @post.post_comments.count %></p>
<!-- ユーザーがログインしている時だけコメントフォームを表示 -->
<% if user_signed_in? %>
  <%= render 'post_comments/index', post: @post %>
  </div>
  <div>
  <%= form_with(model:[@post, @post_comment], remote: true) do |f| %>
    <%= f.text_area :comment, rows:'5',placeholder: "コメントをここに" %>
    <%= f.submit "送信する" %>
  <% end %>
<% end %>
</div>